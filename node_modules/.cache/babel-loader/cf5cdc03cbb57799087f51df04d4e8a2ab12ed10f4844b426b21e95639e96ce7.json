{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getMenusAPI } from \"@/api\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"Layout\",\n  data() {\n    return {\n      menus: []\n    };\n  },\n  methods: {\n    logoutFn() {\n      // 询问用户是否退出登录\n      this.$confirm(\"您确认退出登录吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        // TODO：执行退出登录的操作\n        // 1. 清空 token和用户信息\n        this.$store.commit(\"updateToken\", \"\");\n        this.$store.commit(\"updateUserInfo\", \"\");\n        // 2. 跳转到登录页面\n        this.$router.push(\"/login\");\n      }).catch(err => err);\n    },\n    async getMenusListFn() {\n      const res = await getMenusAPI();\n      // console.log(res);\n      this.menus = res.data.data;\n    }\n  },\n  computed: {\n    ...mapGetters([\"username\", \"nickname\", \"user_pic\"])\n  },\n  created() {\n    this.getMenusListFn();\n  }\n};","map":{"version":3,"mappings":";AAoGA;AACA;AACA;EACAA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;QACAC;QACAC;QACAC;MACA,GACAC;QACA;QACA;QACA;QACA;QACA;QACA;MACA,GACAC;IACA;IACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC;IACA;EACA;AACA","names":["name","data","menus","methods","logoutFn","confirmButtonText","cancelButtonText","type","then","catch","computed","created"],"sourceRoot":"src/views/Layout","sources":["index.vue"],"sourcesContent":["<template>\n  <el-container class=\"main-container\">\n    <!-- 头部区域 -->\n    <el-header>\n      <!-- 左侧的 logo -->\n      <img src=\"../../assets/images/logo.png\" alt=\"\" />\n      <!-- 右侧的菜单 -->\n      <el-menu\n        class=\"el-menu-top\"\n        mode=\"horizontal\"\n        background-color=\"#23262E\"\n        text-color=\"#fff\"\n        active-text-color=\"#409EFF\"\n      >\n        <el-submenu index=\"1\">\n          <template slot=\"title\">\n            <!-- 头像 -->\n            <img v-if=\"user_pic\" :src=\"user_pic\" alt=\"\" class=\"avatar\" />\n            <img\n              v-else\n              src=\"../../assets/images/logo.png\"\n              alt=\"\"\n              class=\"avatar\"\n            />\n\n            <span>个人中心</span>\n          </template>\n          <el-menu-item index=\"1-1\"\n            ><i class=\"el-icon-s-operation\"></i>基本资料</el-menu-item\n          >\n          <el-menu-item index=\"1-2\"\n            ><i class=\"el-icon-camera\"></i>更换头像</el-menu-item\n          >\n          <el-menu-item index=\"1-3\"\n            ><i class=\"el-icon-key\"></i>重置密码</el-menu-item\n          >\n        </el-submenu>\n        <el-menu-item index=\"2\" @click=\"logoutFn\"\n          ><i class=\"el-icon-switch-button\"></i>退出</el-menu-item\n        >\n      </el-menu>\n    </el-header>\n    <!-- 主体区域 -->\n    <el-container>\n      <!-- 侧边栏区域 -->\n      <el-aside width=\"200px\">\n        <div class=\"user-box\">\n          <img v-if=\"user_pic\" :src=\"user_pic\" alt=\"\" />\n          <img v-else src=\"../../assets/images/logo.png\" alt=\"\" />\n          <span>欢迎 {{ nickname || username }}</span>\n        </div>\n        <!-- 左侧导航菜单 -->\n        <el-menu\n          :default-active=\"$route.path\"\n          class=\"el-menu-vertical-demo\"\n          background-color=\"#23262E\"\n          text-color=\"#fff\"\n          active-text-color=\"#409EFF\"\n          unique-opened\n          router\n        >\n          <template v-for=\"(item, index) in menus\">\n            <!-- 不包含子菜单的“一级菜单” -->\n            <el-menu-item\n              :index=\"item.indexPath\"\n              :key=\"item.indexPath\"\n              v-if=\"!item.children\"\n              ><i :class=\"item.icon\"></i>{{ item.title }}</el-menu-item\n            >\n            <!-- 包含子菜单的“一级菜单” -->\n            <el-submenu :index=\"item.indexPath\" :key=\"item.indexPath\" v-else>\n              <template slot=\"title\">\n                <i :class=\"item.icon\"></i>\n                <span>{{ item.title }}</span>\n              </template>\n              <!-- 循环渲染“二级菜单” -->\n              <el-menu-item\n                :index=\"subItem.indexPath\"\n                v-for=\"subItem in item.children\"\n                :key=\"subItem.indexPath\"\n              >\n                <i :class=\"subItem.icon\"></i>{{ subItem.title }}\n              </el-menu-item>\n            </el-submenu>\n          </template>\n        </el-menu>\n      </el-aside>\n      <!-- 页面主体区域 -->\n      <el-container>\n        <el-main>\n          <router-view></router-view>\n        </el-main>\n        <!-- 底部 footer 区域 -->\n        <el-footer>© www.itheima.com - 黑马程序员</el-footer>\n      </el-container>\n    </el-container>\n  </el-container>\n</template>\n\n<script>\nimport { getMenusAPI } from \"@/api\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  name: \"Layout\",\n  data() {\n    return {\n      menus: [],\n    };\n  },\n  methods: {\n    logoutFn() {\n      // 询问用户是否退出登录\n      this.$confirm(\"您确认退出登录吗？\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      })\n        .then(() => {\n          // TODO：执行退出登录的操作\n          // 1. 清空 token和用户信息\n          this.$store.commit(\"updateToken\", \"\");\n          this.$store.commit(\"updateUserInfo\", \"\");\n          // 2. 跳转到登录页面\n          this.$router.push(\"/login\");\n        })\n        .catch((err) => err);\n    },\n    async getMenusListFn() {\n      const res = await getMenusAPI();\n      // console.log(res);\n      this.menus = res.data.data;\n    },\n  },\n  computed: {\n    ...mapGetters([\"username\", \"nickname\", \"user_pic\"]),\n  },\n  created() {\n    this.getMenusListFn();\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.main-container {\n  height: 100vh;\n  .el-header,\n  .el-aside {\n    background-color: #23262e;\n  }\n  .el-header {\n    padding: 0;\n    display: flex;\n    justify-content: space-between;\n  }\n  .el-main {\n    overflow-y: scroll;\n    height: 0;\n    background-color: #f2f2f2;\n  }\n  .el-footer {\n    background-color: #eee;\n    font-size: 12px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n\n.avatar {\n  border-radius: 50%;\n  width: 35px;\n  height: 35px;\n  background-color: #fff;\n  margin-right: 10px;\n  object-fit: cover;\n}\n// 左侧边栏用户信息区域\n.user-box {\n  height: 70px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-top: 1px solid #000;\n  border-bottom: 1px solid #000;\n  user-select: none;\n  img {\n    width: 35px;\n    height: 35px;\n    border-radius: 50%;\n    background-color: #fff;\n    margin-right: 15px;\n    object-fit: cover;\n  }\n  span {\n    color: white;\n    font-size: 12px;\n  }\n}\n// 侧边栏菜单的样式\n// .el-aside {\n//   .el-submenu,\n//   .el-menu-item {\n//     width: 200px;\n//     user-select: none;\n//   }\n// }\n</style>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}